@startuml
!include style.puml
skinparam arrowThickness 1.1
skinparam arrowColor MODEL_COLOR
skinparam classBackgroundColor MODEL_COLOR

' ===============================
' ðŸ“¦ MODEL CORE
' ===============================
package "Model Core" {
  class "<<interface>>\nModel" as Model
  class "<<interface>>\nReadOnlyAddressBook" as ReadOnlyAddressBook
  class "<<interface>>\nReadOnlyUserPrefs" as ReadOnlyUserPrefs
  class AddressBook
  class ModelManager
  class UserPrefs

  ModelManager ..|> Model
  AddressBook .up.|> ReadOnlyAddressBook
  UserPrefs .up.|> ReadOnlyUserPrefs
  Model .right.> ReadOnlyUserPrefs
  Model .left.> ReadOnlyAddressBook
  ModelManager --> "1" AddressBook
  ModelManager --> "1" UserPrefs
}

' ===============================
' ðŸ‘¤ CLIENTS
' ===============================
package "Clients" {
  class UniqueClientList
  class Client

  class ClientName
  class Phone
  class Email
  class Address

  UniqueClientList --> "*" Client
  Client *--> ClientName
  Client *--> Phone
  Client *--> "0..1" Email
  Client *--> "0..1" Address
}

' ===============================
' ðŸ’¼ DEALS
' ===============================
package "Deals" {
  class UniqueDealList
  class Deal

  class DealStatus
  class ClientName
  class PropertyName
  class Price

  UniqueDealList --> "*" Deal
  Deal *--> "1 buyer" ClientName
  Deal *--> "1 seller" ClientName
  Deal *--> DealStatus
  Deal *--> PropertyName
  Deal *--> Price
}

' ===============================
' ðŸ  PROPERTIES
' ===============================
package "Properties" {
  class UniquePropertyList
  class Property

  class PropertyName
  class Size
  class Description
  class Price
  class Address
  class ClientName

  UniquePropertyList --> "*" Property
  Property *--> PropertyName
  Property *--> "0..1" Size
  Property *--> Price
  Property *--> "0..1" Description
  Property *--> Address
  Property *--> ClientName
}

' ===============================
' ðŸ“… EVENTS
' ===============================
package "Events" {
  class UniqueEventList
  class Event

  class EventType
  class ClientName
  class PropertyName
  class Note
  class LocalDateTime

  UniqueEventList --> "*" Event
  Event *--> EventType
  Event *--> ClientName
  Event *--> PropertyName
  Event *--> Note
  Event *--> LocalDateTime
}

' ===============================
' ðŸ“š ADDRESSBOOK AGGREGATION
' ===============================
AddressBook *--> UniqueClientList
AddressBook *--> UniqueDealList
AddressBook *--> UniqueEventList
AddressBook *--> UniquePropertyList

' ===============================
' ðŸ” FILTERED VIEWS IN MODEL
' ===============================
ModelManager --> "* filtered" Client
ModelManager --> "* filtered" Deal
ModelManager --> "* filtered" Property
ModelManager --> "* filtered" Event

@enduml
